openapi: 3.1.0
info:
  title: book-webapp-fastapi_API-specification
  version: '0.1'
  description: OpenAPI定義による図書WebアプリのAPI仕様書
servers:
  - url: 'http://localhost:3000'
paths:
  '/books/{bookId}':
    parameters:
      - schema:
          type: string
        name: bookId
        in: path
        required: true
        description: Id of an existing book.
    get:
      summary: Get Book Info by Book ID
      responses:
        '200':
          description: Book Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
              examples:
                Get Book "Software Design 2022.08":
                  value:
                    id: '0001'
                    title: Software Design 2022.08
                    author: someone
                    company: 技術評論社
                    category: technology
                    country: Japan
                    publishDate: '2019-08-24'
                    createdDatetime: '2019-08-24T10:12:20Z'
                    updateddDatetime: '2019-08-24T10:12:20Z'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    status: failed
                    message: unauthorized
        '404':
          description: Book Not Found
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    status: failed
                    message: not found
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    status: failed
                    message: internal server error. Please wait and try agin.
                    Retry-After: '2022-08-11T10:00:00+09:00'
      operationId: get-books-bookId
      description: Retrieve the information of the book with the matching book ID.
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
          description: 'Bearer {temporarily token}'
    put:
      summary: ''
      operationId: put-books-bookId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    status: succeeded
                    message: registered
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
      description: Update one already existing book
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
            examples:
              'Update one book(id: 142)':
                value:
                  id: 142
                  title: Software Design 2022.08
                  author: someone
                  company: 技術評論社
                  category: technology
                  country: Japan
                  publishDate: '2019-08-24'
                  createdDatetime: '2019-08-24T10:12:20Z'
                  updateddDatetime: '2019-08-24T10:12:20Z'
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          description: 'Bearer {temporarily token}'
          required: true
    delete:
      summary: delete one books according to bookId
      operationId: delete-books-bookId
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
      description: Delete a target book according to bookId
      parameters:
        - schema:
            type: string
          in: header
          description: 'Bearer {temporarily token}'
          required: true
          name: Authorization
  /books:
    post:
      summary: Create New Book
      operationId: post-book
      responses:
        '200':
          description: Book Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
              examples:
                New Book Bob Fellow:
                  value:
                    id: '0142'
                    title: Software Design 2022.08
                    author: someone
                    company: 技術評論社
                    category: technology
                    country: Japan
                    publishDate: '2019-08-24'
        '401':
          description: Missing Required Information
        '404':
          description: Email Already Taken
        '500':
          description: Internal Server Error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                title:
                  type: string
                author:
                  type: string
                category:
                  type: string
                company:
                  type: string
                publishDate:
                  type: string
                  format: date
                  example: '2022-08-09'
              required:
                - id
                - title
                - category
            examples:
              Create Book Bob Fellow:
                value:
                  id: '0142'
                  title: Software Design 2022.08
                  author: someone
                  company: 技術評論社
                  category: technology
                  country: Japan
                  publishDate: '2019-08-24'
                  createdDatetime: '2019-08-24T10:12:20Z'
                  updateddDatetime: '2019-08-24T10:12:20Z'
        description: Post the necessary fields for the API to create a new book.
      description: Create a new book.
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          description: 'Bearer {temporarily token}'
    parameters: []
components:
  schemas:
    Book:
      title: Book
      type: object
      description: 書籍情報
      examples:
        - id: ”0142"
          title: Software Design 2022.08
          author: someone
          company: 技術評論社
          category: technology
          country: Japan
          publishDate: '2019-08-24'
          createdDatetime: '2019-08-24T10:12:20Z'
          updateddDatetime: '2019-08-24T10:12:20Z'
      properties:
        id:
          type: string
          description: Unique identifier for the given book.
        title:
          type: string
        author:
          type: string
        category:
          type: string
        country:
          type: string
        publishDate:
          type: string
          format: date
          example: '2022-08-10'
          description: Set to true if the book's email has been verified.
        createdDatetime:
          type: string
          format: date-time
          description: The date that the book was created.
        updatedDatetime:
          type: string
          format: date-time
          description: The date that the book was created.
      required:
        - id
        - title
        - category
